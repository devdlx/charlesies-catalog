

<paper-tabs id="navtabs" selected="[[routeSelected]]" noinkx>
  <template is="dom-repeat" items="[[packages]]">
    <paper-tab route="{{item.name}}" link><a is="pushstate-anchor" href="{{item.name}}">{{item.title}}</a></paper-tab>
  </template>
</paper-tabs>


<app-router id="router" class="flex" main mode="pushstate" on-activate-route-start="routeStart">
  <app-route path="/" element="page-items" bindRouter></app-route>
  <!-- <app-route path="/item/" element="page-items" bindRouter onUrlChange="updateModel"></app-route> -->
  <app-route path="/items/:itemid" element="page-home" bindRouter onUrlChange="updateModel"></app-route>
  <app-route path="/account" element="page-items" bindRouter onUrlChange="updateModel"></app-route>
  <app-route path="/cart" element="page-items" bindRouter onUrlChange="updateModel"></app-route>
  <app-route path="/cart/checkout" element="page-items" bindRouter onUrlChange="updateModel"></app-route>
  <app-route path="*" element="page-error"></app-route>
</app-router>



<script type="text/javascript">


(function() {
  Polymer({
    is: 'tab-snip',


    routeStart: function(event) {
      // console.log(this.$.navtabs.items[0].attributes.route.textContent);
      // console.log(event.detail.path);
      var that = this;
      this.$.navtabs.items.forEach(function(entry, index) {
        if (typeof entry.attributes.route === 'undefined') {
          return;
        }
        var tabRoute = entry.attributes.route.textContent.split('/')[1];
        var routePath = event.detail.path.split('/')[1];
        // console.log(routePath, index);
        // console.log(routePath);

        if (tabRoute === routePath) {
          // console.log(entry.attributes.route.textContent);
          // console.log(index);
          that.routeSelected = index;
          return;
        }

      });

    },

    _narrowChanged: function(narrow) {
      // console.log('narrow: ', narrow);
      if (narrow) {
        this.$.appToolbar.classList.add("medium-tall");
      } else {
        this.$.appToolbar.classList.remove("medium-tall");
      }
    },






  });




</script>
