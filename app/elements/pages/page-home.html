<dom-module id="page-home">
  <template>
    <style is="custom-style">
      .grid-layout {
        /*width: 94%;*/
        /*margin: 0 auto;*/
        /*padding: 16px;*/
        @apply(--layout-inline);
        @apply(--layout-wrap);
        @apply(--layout-start);
        @apply(--layout-horizontal);
      }

      .small {
        width: 180px;
        height: 180px;
        margin-right: 8px;
        margin-bottom: 8px;
      }

      .grid-cell {
        display: block;
        width: 100%;
        height: 210px;
      }


    </style>
    <firebase-collection id="packages" location="https://charlesiesbeta.firebaseio.com/packages" data="{{packages}}" order-by-child="priorty"></firebase-collection>

    <div class="grid-layout">
      <template is="dom-repeat" items="{{packages}}">
        <a href$="[[_packageLink(item.name)]]" is="pushstate-anchor" class="grid-cell">
          <package-tile package="[[item]]" name$="[[item.name]]"></package-tile>
        </a>
      </template>
    </div>

  </template>

  <script>
    Polymer({
      is: 'page-home',
      enableCustomStyleProperties: true,
      properties: {},
      

      newItemClick: function(e, f) {
        // console.log('newItemClick', e, f);
        // this.$.cdata.newPackage();
        var coll = this.$.packages;
        coll.add(this.$.cdata.newPackageObject);
      },

      attached: function() {
        // reset page title since this is the default page
        this.fire('page-meta', {
          title: null
        });
      },

      _packageLink: function(id) {
        // return "/browse?packageId=" + name;
        return "/items/?category=" + id;
      }
    });
  </script>
</dom-module>
