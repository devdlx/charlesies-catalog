<link rel="import" href="../catalog-package/catalog-package.html">
<link rel="import" href="../theme-color/theme-color.html">
<link rel="import" href="../../bower_components/paper-input/paper-input.html">
<link rel="import" href="../../bower_components/paper-button/paper-button.html">
<dom-module id="package-tile">
  <link rel="import" type="css" href="package-tile.css">
  <template>
    <!-- <catalog-package id="package" key="{{key}}"></catalog-package> -->

    <theme-color draggable="true" id="content" color="[[package.color]]" url="[[package.image]]" >
      <paper-material elevation="1" animated="true" themed themed-image>
        <h2 class="symbol" hidden$="{{package.image}}" >[[package.symbol]]</h2>
        <h2 hidden$="{{!package.image}}" class="symbol" themed-color>[[package.title]]</h2>
        <span class="version" hidden$="{{package.image}}">[[package.version]]</span>
        <!-- <span class="trash">
        <paper-button on-click="_onTrashClick">trash</paper-button>
      </span> -->

        <h3 hidden$="{{package.image}}" class="title" extended$="[[_extendedTitle(package)]]">[[package.title]]</h3>
        <!-- <hr themed-reverse hidden$="{{package.image}}"> -->
        <!-- <p class="tagline" hidden$="{{package.image}}">[[package.tagline]]</p> -->
        <!-- <paper-input value="{{package.title}}" hidden$="{{package.image}}"></paper-input> -->
      </paper-material>
    </theme-color>

  </template>
</dom-module>

<script>
  Polymer({
    is: 'package-tile',
    enableCustomStyleProperties: true,
    properties: {
      key: {
        type: String,
        notify: true
      },
      package: {
        type: Object
      }
    },
    attached: function() {
      var tiles = this.parentNode.parentNode.querySelectorAll('package-tile');
      var index = Array.prototype.indexOf.call(tiles, this);
      // console.log(Array.prototype.indexOf.call(tiles, this));
      setTimeout(function() {
        this.classList.add('active');
      }.bind(this), (index + 1) * 90);
    },
    _extendedTitle: function(p) {
      // console.log('_extendedTitle', p.title.length > 20);
      if (!p.title) return;
      if (p.title.length > 20) return true;
    },
    _onTrashClick: function(e) {
      // console.log(this.package);
      this.$.package.remove(this.package);
    }
  });
</script>
